import{d as se,p as ae,l as u,y as te,u as le,r as f,s as t,G as re,A as ie,v as ue,i as A,j as n,k as ne,e as a,n as d,m as o,t as w,f as oe,h as N,o as v,q as g,B as ve,H as de,E as ce,I as pe,F as me}from"./profiles-DNT2HGIN.js";var _e=v('<div class="center svelte-6xuz9d"><div class="spinner svelte-6xuz9d"></div></div>'),fe=v('<div class="center svelte-6xuz9d"><p class="denied svelte-6xuz9d">Access denied</p> <p class="denied-sub svelte-6xuz9d">Admin only.</p></div>'),ge=v('<p class="error svelte-6xuz9d"> </p>'),he=v('<div class="center svelte-6xuz9d"><h1 class="title svelte-6xuz9d">Admin Panel</h1> <form class="login-form svelte-6xuz9d"><input type="email" placeholder="Email" class="svelte-6xuz9d"/> <input type="password" placeholder="Password" class="svelte-6xuz9d"/> <button type="submit" class="svelte-6xuz9d"> </button> <!></form></div>'),xe=v('<div class="center svelte-6xuz9d"><div class="spinner svelte-6xuz9d"></div></div>'),ze=v('<li class="user-row svelte-6xuz9d"><span class="user-email svelte-6xuz9d"> </span> <button> </button></li>'),be=v('<ul class="user-list svelte-6xuz9d"></ul>'),ye=v('<p class="error svelte-6xuz9d"> </p>'),Ae=v('<div class="admin svelte-6xuz9d"><header class="svelte-6xuz9d"><h1 class="svelte-6xuz9d">Admin Panel</h1> <button class="logout-btn svelte-6xuz9d">Logout</button></header> <!> <!></div>');function we(T,W){ae(W,!0);const M="usual-polo-uphill@duck.com";let P=u(null),O=u(!0),k=u(!1),h=u(te([])),E=u(!1),c=u(""),I=u(""),L=u(""),x=u(""),z=u(!1);le(()=>{f.auth.getSession().then(({data:{session:l}})=>{t(P,l,!0),t(O,!1),j(l)});const{data:{subscription:e}}=f.auth.onAuthStateChange((l,r)=>{t(P,r,!0),j(r)});return()=>e.unsubscribe()});function j(e){e&&e.user?.email!==M?(t(k,!0),f.auth.signOut()):e&&e.user?.email===M&&(t(k,!1),K())}async function J(){t(x,""),t(z,!0);const{error:e}=await f.auth.signInWithPassword({email:a(I),password:a(L)});e&&t(x,e.message,!0),t(z,!1)}async function K(){t(E,!0),t(c,"");try{t(h,await re(),!0)}catch(e){t(c,e.message,!0)}t(E,!1)}async function Q(e){t(c,"");try{const l=await pe(e.id,!e.is_premium);t(h,a(h).map(r=>r.id===l.id?l:r),!0)}catch(l){t(c,l.message,!0)}}async function R(){await f.auth.signOut()}var q=ie(),U=ue(q);{var V=e=>{var l=_e();n(e,l)},X=e=>{var l=fe();n(e,l)},Y=e=>{var l=he(),r=d(o(l),2),b=o(r),p=d(b,2),m=d(p,2),S=o(m),B=d(m,2);{var D=s=>{var i=ge(),_=o(i);w(()=>g(_,a(x))),n(s,i)};A(B,s=>{a(x)&&s(D)})}w(()=>{m.disabled=a(z),g(S,a(z)?"Signing in...":"Sign in")}),oe("submit",r,s=>{s.preventDefault(),J()}),N(b,()=>a(I),s=>t(I,s)),N(p,()=>a(L),s=>t(L,s)),n(e,l)},Z=e=>{var l=Ae(),r=o(l),b=d(o(r),2);b.__click=R;var p=d(r,2);{var m=s=>{var i=xe();n(s,i)},S=s=>{var i=be();ve(i,21,()=>a(h),de,(_,y)=>{var C=ze(),G=o(C),$=o(G),F=d(G,2);let H;F.__click=()=>Q(a(y));var ee=o(F);w(()=>{g($,a(y).email),H=ce(F,1,"toggle-btn svelte-6xuz9d",null,H,{active:a(y).is_premium}),g(ee,a(y).is_premium?"Premium":"Free")}),n(_,C)}),n(s,i)};A(p,s=>{a(E)?s(m):s(S,!1)})}var B=d(p,2);{var D=s=>{var i=ye(),_=o(i);w(()=>g(_,a(c))),n(s,i)};A(B,s=>{a(c)&&s(D)})}n(e,l)};A(U,e=>{a(O)?e(V):a(k)?e(X,1):a(P)?e(Z,!1):e(Y,2)})}n(T,q),ne()}se(["click"]);me(we,{target:document.getElementById("app")});
