import{d as ve,p as de,l as o,y as ce,u as pe,r as z,s as a,G as _e,A as me,v as Y,i as y,j as v,k as fe,e as t,n as i,m as l,t as k,f as he,h as K,o as c,q as x,B as xe,H as be,I as ge,E as ze,J as ye,F as ke}from"./profiles-DsH1E9D3.js";var we=c('<div class="center svelte-6xuz9d"><div class="spinner svelte-6xuz9d"></div></div>'),Ae=c('<div class="center svelte-6xuz9d"><p class="denied svelte-6xuz9d">Access denied</p> <p class="denied-sub svelte-6xuz9d">Admin only.</p></div>'),Pe=c('<p class="error svelte-6xuz9d"> </p>'),De=c('<div class="center svelte-6xuz9d"><h1 class="title svelte-6xuz9d">Admin Panel</h1> <form class="login-form svelte-6xuz9d"><input type="email" placeholder="Email" class="svelte-6xuz9d"/> <input type="password" placeholder="Password" class="svelte-6xuz9d"/> <button type="submit" class="svelte-6xuz9d"> </button> <!></form></div>'),Me=c('<div class="center svelte-6xuz9d"><div class="spinner svelte-6xuz9d"></div></div>'),Ee=c('<li class="user-row svelte-6xuz9d"><span class="user-email svelte-6xuz9d"> </span> <div class="row-actions svelte-6xuz9d"><button> </button> <button class="delete-btn svelte-6xuz9d"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-6xuz9d"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"></path></svg></button></div></li>'),Ie=c('<ul class="user-list svelte-6xuz9d"></ul>'),Le=c('<p class="error svelte-6xuz9d"> </p>'),Se=c('<div class="modal-overlay svelte-6xuz9d"><div class="modal svelte-6xuz9d"><p class="modal-text svelte-6xuz9d"> </p> <div class="modal-buttons svelte-6xuz9d"><button class="modal-btn no svelte-6xuz9d">No</button> <button class="modal-btn yes svelte-6xuz9d">Yes</button></div></div></div>'),Be=c('<div class="admin svelte-6xuz9d"><header class="svelte-6xuz9d"><h1 class="svelte-6xuz9d">Admin Panel</h1> <button class="logout-btn svelte-6xuz9d">Logout</button></header> <!> <!></div> <!>',1);function je(Q,R){de(R,!0);const J="usual-polo-uphill@duck.com";let S=o(null),T=o(!0),B=o(!1),f=o(ce([])),j=o(!1),p=o(""),C=o(""),F=o(""),w=o(""),A=o(!1);pe(()=>{z.auth.getSession().then(({data:{session:s}})=>{a(S,s,!0),a(T,!1),U(s)});const{data:{subscription:e}}=z.auth.onAuthStateChange((s,n)=>{a(S,n,!0),U(n)});return()=>e.unsubscribe()});function U(e){e&&e.user?.email!==J?(a(B,!0),z.auth.signOut()):e&&e.user?.email===J&&(a(B,!1),Z())}async function X(){a(w,""),a(A,!0);const{error:e}=await z.auth.signInWithPassword({email:t(C),password:t(F)});e&&a(w,e.message,!0),a(A,!1)}async function Z(){a(j,!0),a(p,"");try{a(f,await _e(),!0)}catch(e){a(p,e.message,!0)}a(j,!1)}async function $(e){a(p,"");try{const s=await ye(e.id,!e.is_premium);a(f,t(f).map(n=>n.id===s.id?s:n),!0)}catch(s){a(p,s.message,!0)}}let _=o(null);function ee(e){a(_,e,!0)}async function te(){if(t(_)){a(p,"");try{await ge(t(_).id),a(f,t(f).filter(e=>e.id!==t(_).id),!0)}catch(e){a(p,e.message,!0)}a(_,null)}}async function ae(){await z.auth.signOut()}var V=me(),se=Y(V);{var le=e=>{var s=we();v(e,s)},re=e=>{var s=Ae();v(e,s)},ie=e=>{var s=De(),n=i(l(s),2),b=l(n),P=i(b,2),h=i(P,2),H=l(h),N=i(h,2);{var O=u=>{var D=Pe(),q=l(D);k(()=>x(q,t(w))),v(u,D)};y(N,u=>{t(w)&&u(O)})}k(()=>{h.disabled=t(A),x(H,t(A)?"Signing in...":"Sign in")}),he("submit",n,u=>{u.preventDefault(),X()}),K(b,()=>t(C),u=>a(C,u)),K(P,()=>t(F),u=>a(F,u)),v(e,s)},ne=e=>{var s=Be(),n=Y(s),b=l(n),P=i(l(b),2);P.__click=ae;var h=i(b,2);{var H=r=>{var d=Me();v(r,d)},N=r=>{var d=Ie();xe(d,21,()=>t(f),be,(g,m)=>{var M=Ee(),E=l(M),I=l(E),G=i(E,2),L=l(G);let W;L.__click=()=>$(t(m));var ue=l(L),oe=i(L,2);oe.__click=()=>ee(t(m)),k(()=>{x(I,t(m).email),W=ze(L,1,"toggle-btn svelte-6xuz9d",null,W,{active:t(m).is_premium}),x(ue,t(m).is_premium?"Premium":"Free")}),v(g,M)}),v(r,d)};y(h,r=>{t(j)?r(H):r(N,!1)})}var O=i(h,2);{var u=r=>{var d=Le(),g=l(d);k(()=>x(g,t(p))),v(r,d)};y(O,r=>{t(p)&&r(u)})}var D=i(n,2);{var q=r=>{var d=Se(),g=l(d),m=l(g),M=l(m),E=i(m,2),I=l(E);I.__click=()=>a(_,null);var G=i(I,2);G.__click=te,k(()=>x(M,`Delete user ${t(_).email??""}?`)),v(r,d)};y(D,r=>{t(_)&&r(q)})}v(e,s)};y(se,e=>{t(T)?e(le):t(B)?e(re,1):t(S)?e(ne,!1):e(ie,2)})}v(Q,V),fe()}ve(["click"]);ke(je,{target:document.getElementById("app")});
