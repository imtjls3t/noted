import{d as se,p as ae,j as u,w as te,u as le,o as f,s as t,E as re,y as ie,r as ue,i as w,f as n,h as ne,b as a,l as d,k as o,t as A,e as oe,c as U,m as v,n as g,z as ve,F as de,C as ce,G as pe,D as me}from"./profiles-CYDD6ipJ.js";var _e=v('<div class="center svelte-6xuz9d"><div class="spinner svelte-6xuz9d"></div></div>'),fe=v('<div class="center svelte-6xuz9d"><p class="denied svelte-6xuz9d">Access denied</p> <p class="denied-sub svelte-6xuz9d">Admin only.</p></div>'),ge=v('<p class="error svelte-6xuz9d"> </p>'),he=v('<div class="center svelte-6xuz9d"><h1 class="title svelte-6xuz9d">Admin</h1> <form class="login-form svelte-6xuz9d"><input type="email" placeholder="Email" class="svelte-6xuz9d"/> <input type="password" placeholder="Password" class="svelte-6xuz9d"/> <button type="submit" class="svelte-6xuz9d"> </button> <!></form></div>'),xe=v('<div class="center svelte-6xuz9d"><div class="spinner svelte-6xuz9d"></div></div>'),ze=v('<li class="user-row svelte-6xuz9d"><span class="user-email svelte-6xuz9d"> </span> <button> </button></li>'),be=v('<ul class="user-list svelte-6xuz9d"></ul>'),ye=v('<p class="error svelte-6xuz9d"> </p>'),we=v('<div class="admin svelte-6xuz9d"><header class="svelte-6xuz9d"><h1 class="svelte-6xuz9d">Users</h1> <button class="logout-btn svelte-6xuz9d">Logout</button></header> <!> <!></div>');function Ae(W,q){ae(q,!0);const M="usual-polo-uphill@duck.com";let k=u(null),O=u(!0),P=u(!1),h=u(te([])),E=u(!1),c=u(""),I=u(""),L=u(""),x=u(""),z=u(!1);le(()=>{f.auth.getSession().then(({data:{session:l}})=>{t(k,l,!0),t(O,!1),j(l)});const{data:{subscription:e}}=f.auth.onAuthStateChange((l,r)=>{t(k,r,!0),j(r)});return()=>e.unsubscribe()});function j(e){e&&e.user?.email!==M?(t(P,!0),f.auth.signOut()):e&&e.user?.email===M&&(t(P,!1),J())}async function H(){t(x,""),t(z,!0);const{error:e}=await f.auth.signInWithPassword({email:a(I),password:a(L)});e&&t(x,e.message,!0),t(z,!1)}async function J(){t(E,!0),t(c,"");try{t(h,await re(),!0)}catch(e){t(c,e.message,!0)}t(E,!1)}async function K(e){t(c,"");try{const l=await pe(e.id,!e.is_premium);t(h,a(h).map(r=>r.id===l.id?l:r),!0)}catch(l){t(c,l.message,!0)}}async function Q(){await f.auth.signOut()}var B=ie(),R=ue(B);{var V=e=>{var l=_e();n(e,l)},X=e=>{var l=fe();n(e,l)},Y=e=>{var l=he(),r=d(o(l),2),b=o(r),p=d(b,2),m=d(p,2),S=o(m),D=d(m,2);{var C=s=>{var i=ge(),_=o(i);A(()=>g(_,a(x))),n(s,i)};w(D,s=>{a(x)&&s(C)})}A(()=>{m.disabled=a(z),g(S,a(z)?"Signing in...":"Sign in")}),oe("submit",r,s=>{s.preventDefault(),H()}),U(b,()=>a(I),s=>t(I,s)),U(p,()=>a(L),s=>t(L,s)),n(e,l)},Z=e=>{var l=we(),r=o(l),b=d(o(r),2);b.__click=Q;var p=d(r,2);{var m=s=>{var i=xe();n(s,i)},S=s=>{var i=be();ve(i,21,()=>a(h),de,(_,y)=>{var G=ze(),N=o(G),$=o(N),F=d(N,2);let T;F.__click=()=>K(a(y));var ee=o(F);A(()=>{g($,a(y).email),T=ce(F,1,"toggle-btn svelte-6xuz9d",null,T,{active:a(y).is_premium}),g(ee,a(y).is_premium?"Premium":"Free")}),n(_,G)}),n(s,i)};w(p,s=>{a(E)?s(m):s(S,!1)})}var D=d(p,2);{var C=s=>{var i=ye(),_=o(i);A(()=>g(_,a(c))),n(s,i)};w(D,s=>{a(c)&&s(C)})}n(e,l)};w(R,e=>{a(O)?e(V):a(P)?e(X,1):a(k)?e(Z,!1):e(Y,2)})}n(W,B),ne()}se(["click"]);me(Ae,{target:document.getElementById("app")});
