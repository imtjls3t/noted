import{N as ve,g as de,a as ue,L as pe,d as F,p as P,i as R,b as a,s as t,t as N,e as he,c as H,f as m,h as J,j as w,k as d,l as p,m as x,n as M,o as Y,u as X,q as fe,r as Z,v as _e,w as be,x as ge,y as ie,z as ke,A as me,B as ye,C as re,D as we}from"./profiles-CYDD6ipJ.js";const xe=Symbol("is custom element"),Se=Symbol("is html");function oe(u,o,r,e){var s=qe(u);s[o]!==(s[o]=r)&&(o==="loading"&&(u[pe]=r),r==null?u.removeAttribute(o):typeof r!="string"&&je(u).includes(o)?u[o]=r:u.setAttribute(o,r))}function qe(u){return u.__attributes??={[xe]:u.nodeName.includes("-"),[Se]:u.namespaceURI===ve}}var ne=new Map;function je(u){var o=u.getAttribute("is")||u.nodeName,r=ne.get(o);if(r)return r;ne.set(o,r=[]);for(var e,s=u,v=Element.prototype;v!==s;){e=ue(s);for(var l in e)e[l].set&&r.push(l);s=de(s)}return r}function ze(u,o,r,e){var s=e,v=!0,l=()=>(v&&(v=!1,s=e),s),b;b=u[o],b===void 0&&e!==void 0&&(b=l());var g;return g=()=>{var E=u[o];return E===void 0?l():(v=!0,E)},g}var Te=x('<p class="error svelte-15ijoy3"> </p>'),Ee=x('<div class="login-container svelte-15ijoy3"><div class="login-header svelte-15ijoy3"><svg class="logo svelte-15ijoy3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg> <h1 class="svelte-15ijoy3">Noted.</h1> <p class="subtitle svelte-15ijoy3"> </p></div> <form autocomplete="on" class="svelte-15ijoy3"><div class="field svelte-15ijoy3"><input type="email" name="email" autocomplete="username" placeholder="Email" required="" class="svelte-15ijoy3"/></div> <div class="field svelte-15ijoy3"><input type="password" name="password" placeholder="Password" required="" minlength="6" class="svelte-15ijoy3"/></div> <!> <button type="submit" class="submit-btn svelte-15ijoy3"> </button></form> <button class="toggle-btn svelte-15ijoy3"> </button></div>');function Ce(u,o){P(o,!0);let r=w(""),e=w(""),s=w(!1),v=w(!1),l=w("");async function b(_){_.preventDefault(),t(v,!0),t(l,"");const{error:z}=a(s)?await Y.auth.signUp({email:a(r),password:a(e)}):await Y.auth.signInWithPassword({email:a(r),password:a(e)});z?t(l,z.message,!0):a(s)&&t(l,"Check your email for a confirmation link."),t(v,!1)}var g=Ee(),E=d(g),h=p(d(E),4),k=d(h),q=p(E,2),C=d(q),I=d(C),A=p(C,2),S=d(A),D=p(A,2);{var y=_=>{var z=Te(),U=d(z);N(()=>M(U,a(l))),m(_,z)};R(D,_=>{a(l)&&_(y)})}var j=p(D,2),i=d(j),c=p(q,2);c.__click=()=>{t(s,!a(s)),t(l,"")};var f=d(c);N(()=>{M(k,a(s)?"Create an account":"Sign in to continue"),I.disabled=a(v),oe(S,"autocomplete",a(s)?"new-password":"current-password"),S.disabled=a(v),j.disabled=a(v),M(i,a(v)?"...":a(s)?"Sign Up":"Sign In"),M(f,a(s)?"Already have an account? Sign in":"Don't have an account? Sign up")}),he("submit",q,b),H(I,()=>a(r),_=>t(r,_)),H(S,()=>a(e),_=>t(e,_)),m(u,g),J()}F(["click"]);const Me="https://mmouwjthtuydpibxfbkq.supabase.co",Ie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1tb3V3anRodHV5ZHBpYnhmYmtxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA5NTYwNzcsImV4cCI6MjA4NjUzMjA3N30.e-Aed6B6ZiXmJ94GujPqMXiIDKLmaRDqkUTXli-lAkc";async function Ae(u){const{data:{session:o}}=await Y.auth.getSession();if(!o)throw new Error("Not authenticated");const r=new FormData;r.append("audio",u,"audio.webm");const e=await fetch(`${Me}/functions/v1/transcribe`,{method:"POST",headers:{Authorization:`Bearer ${o.access_token}`,apikey:Ie},body:r}),s=await e.text();if(!e.ok){let l;try{l=JSON.parse(s).error}catch{l=s}throw new Error(l||`HTTP ${e.status}`)}const{text:v}=JSON.parse(s);return v}const se=window.SpeechRecognition||window.webkitSpeechRecognition;function Re(){return!!se}function De({onResult:u,onEnd:o,onError:r}){if(!se)return r?.("Speech recognition is not supported in this browser."),null;const e=new se;return e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.onresult=s=>{let v="",l="";for(let b=0;b<s.results.length;b++){const g=s.results[b][0].transcript;s.results[b].isFinal?v+=g:l+=g}u?.(v+l)},e.onend=()=>{o?.()},e.onerror=s=>{s.error!=="aborted"&&r?.(s.error)},{start(){e.start()},stop(){e.stop()},abort(){e.abort()}}}var Be=x('<div class="saved-flash svelte-1qh7tkx"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="svelte-1qh7tkx"><polyline points="20 6 9 17 4 12" class="svelte-1qh7tkx"></polyline></svg> <p class="svelte-1qh7tkx">Saved!</p></div>'),Ne=x('<div class="transcribing-view svelte-1qh7tkx"><div class="spinner-large svelte-1qh7tkx"></div> <p class="mic-label svelte-1qh7tkx">Transcribing...</p></div>'),Ue=x('<div class="input-area svelte-1qh7tkx"><input type="text" class="event-input svelte-1qh7tkx" placeholder="Tap mic to dictate..." enterkeyhint="done"/> <button class="save-btn svelte-1qh7tkx"> </button></div> <button class="mic-btn svelte-1qh7tkx"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1qh7tkx"><rect x="9" y="1" width="6" height="12" rx="3" class="svelte-1qh7tkx"></rect><path d="M19 10v1a7 7 0 0 1-14 0v-1" class="svelte-1qh7tkx"></path><line x1="12" y1="18" x2="12" y2="23" class="svelte-1qh7tkx"></line><line x1="8" y1="23" x2="16" y2="23" class="svelte-1qh7tkx"></line></svg></button> <p class="hint svelte-1qh7tkx"> </p>',1),Le=x('<p class="error svelte-1qh7tkx"> </p>'),Pe=x('<div class="modal-overlay svelte-1qh7tkx"><div class="modal svelte-1qh7tkx"><div class="modal-mic recording svelte-1qh7tkx"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1qh7tkx"><rect x="9" y="1" width="6" height="12" rx="3" class="svelte-1qh7tkx"></rect><path d="M19 10v1a7 7 0 0 1-14 0v-1" class="svelte-1qh7tkx"></path><line x1="12" y1="18" x2="12" y2="23" class="svelte-1qh7tkx"></line><line x1="8" y1="23" x2="16" y2="23" class="svelte-1qh7tkx"></line></svg></div> <p class="modal-label svelte-1qh7tkx">Recording...</p> <div class="modal-buttons svelte-1qh7tkx"><button class="modal-btn cancel svelte-1qh7tkx">Cancel</button> <button class="modal-btn stop svelte-1qh7tkx">Stop</button></div></div></div>'),Je=x('<div class="record-view svelte-1qh7tkx"><!> <!> <div class="version-row svelte-1qh7tkx"><button class="update-btn svelte-1qh7tkx">Update</button> <span class="svelte-1qh7tkx"></span></div></div> <!>',1);function Oe(u,o){P(o,!0);let r=w(""),e=w("idle"),s=w(""),v=!1,l=w(!1),b=w(!1),g=null,E=[],h=null,k=null;X(()=>{fe().then(n=>{t(l,n?.is_premium??!1,!0),t(b,!0),q()}).catch(()=>{t(b,!0),q()})});function q(){t(s,""),t(r,""),v=!1,a(l)?A():S()}function C(){a(l)?g?.stop():k?.stop()}function I(){v=!0,a(l)?(h&&h.getTracks().forEach(n=>n.stop()),g?.stop()):k?.abort(),t(e,"idle")}async function A(){try{h=await navigator.mediaDevices.getUserMedia({audio:!0}),E=[],g=new MediaRecorder(h,{mimeType:"audio/webm"}),g.ondataavailable=n=>{n.data.size>0&&E.push(n.data)},g.onstop=async()=>{if(h.getTracks().forEach(n=>n.stop()),h=null,!v){t(e,"transcribing");try{const n=new Blob(E,{type:"audio/webm"}),T=await Ae(n);t(r,T,!0),t(e,"idle")}catch(n){t(s,`Transcription failed: ${n.message}`),t(e,"idle")}}},g.start(),t(e,"recording"),history.pushState({recording:!0},"")}catch(n){t(s,`Mic access denied: ${n.message}`)}}function S(){if(!Re()){t(s,"Speech recognition not supported in this browser");return}k=De({onResult(n){t(r,n,!0)},onEnd(){k=null,a(e)==="recording"&&t(e,"idle")},onError(n){t(s,`Speech error: ${n}`),t(e,"idle")}}),k&&(k.start(),t(e,"recording"),history.pushState({recording:!0},""))}X(()=>{function n(){a(e)==="recording"&&I()}return window.addEventListener("popstate",n),()=>window.removeEventListener("popstate",n)});async function D(){if("serviceWorker"in navigator){const n=await navigator.serviceWorker.getRegistration();if(n){await n.unregister();const T=await caches.keys();await Promise.all(T.map(B=>caches.delete(B)))}}location.reload()}async function y(){if(a(r).trim()){t(e,"saving"),t(s,"");try{await _e(a(r).trim()),t(e,"saved"),t(r,""),setTimeout(()=>{t(e,"idle")},1200)}catch(n){t(s,`Save failed: ${n.message}`),t(e,"idle")}}}var j=Je(),i=Z(j),c=d(i);{var f=n=>{var T=Be();m(n,T)},_=n=>{var T=Ne();m(n,T)},z=n=>{var T=Ue(),B=Z(T),W=d(B);W.__keydown=V=>V.key==="Enter"&&y();var L=p(W,2);L.__click=y;var te=d(L),ae=p(B,2);ae.__click=q;var le=p(ae,2),ce=d(le);N(V=>{L.disabled=V,M(te,a(e)==="saving"?"...":"Save"),ae.disabled=a(e)==="saving",M(ce,a(l)?"Whisper":"Web Speech API")},[()=>!a(r).trim()||a(e)==="saving"]),H(W,()=>a(r),V=>t(r,V)),m(n,T)};R(c,n=>{a(e)==="saved"?n(f):a(e)==="transcribing"?n(_,1):n(z,!1)})}var U=p(c,2);{var G=n=>{var T=Le(),B=d(T);N(()=>M(B,a(s))),m(n,T)};R(U,n=>{a(s)&&n(G)})}var K=p(U,2),O=d(K);O.__click=D;var Q=p(O,2);Q.textContent="v9";var $=p(i,2);{var ee=n=>{var T=Pe(),B=d(T),W=p(d(B),4),L=d(W);L.__click=I;var te=p(L,2);te.__click=C,m(n,T)};R($,n=>{a(e)==="recording"&&n(ee)})}m(u,j),J()}F(["keydown","click"]);var We=x('<div class="delete-confirm svelte-1z0u85a"><p class="svelte-1z0u85a">Delete this record?</p> <div class="confirm-buttons svelte-1z0u85a"><button class="btn btn-danger svelte-1z0u85a">Delete</button> <button class="btn btn-secondary svelte-1z0u85a">Cancel</button></div></div>'),Ve=x('<div class="edit-form svelte-1z0u85a"><input type="text" class="edit-input svelte-1z0u85a"/> <div class="edit-buttons svelte-1z0u85a"><button class="btn btn-primary svelte-1z0u85a">Save</button> <button class="btn btn-secondary svelte-1z0u85a">Cancel</button></div></div>'),He=x('<div class="card-content svelte-1z0u85a"><div class="card-text svelte-1z0u85a"><span class="keywords svelte-1z0u85a"> </span> <span class="timestamp svelte-1z0u85a"> <span class="exact svelte-1z0u85a"> </span></span></div> <div class="card-actions svelte-1z0u85a"><button class="icon-btn svelte-1z0u85a" aria-label="Edit"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1z0u85a"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg></button> <button class="icon-btn delete svelte-1z0u85a" aria-label="Delete"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1z0u85a"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg></button></div></div>'),Ye=x('<div class="card svelte-1z0u85a"><!></div>');function Xe(u,o){P(o,!0);let r=w(!1),e=w(""),s=w(!1);function v(){t(e,o.event.keywords,!0),t(r,!0)}async function l(){a(e).trim()&&(await o.onUpdate(o.event.id,a(e).trim()),t(r,!1))}function b(){t(r,!1)}function g(){t(s,!0)}async function E(){await o.onDelete(o.event.id),t(s,!1)}function h(){t(s,!1)}function k(y){const i=Date.now()-new Date(y).getTime(),c=Math.floor(i/6e4),f=Math.floor(i/36e5),_=Math.floor(i/864e5);return c<1?"just now":c<60?`${c}m ago`:f<24?`${f}h ago`:_<30?`${_}d ago`:`${Math.floor(_/30)}mo ago`}function q(y){return new Date(y).toLocaleString()}var C=Ye(),I=d(C);{var A=y=>{var j=We(),i=p(d(j),2),c=d(i);c.__click=E;var f=p(c,2);f.__click=h,m(y,j)},S=y=>{var j=Ve(),i=d(j);i.__keydown=z=>z.key==="Enter"&&l();var c=p(i,2),f=d(c);f.__click=l;var _=p(f,2);_.__click=b,H(i,()=>a(e),z=>t(e,z)),m(y,j)},D=y=>{var j=He(),i=d(j),c=d(i),f=d(c),_=p(c,2),z=d(_),U=p(z),G=d(U),K=p(i,2),O=d(K);O.__click=v;var Q=p(O,2);Q.__click=g,N(($,ee,n)=>{M(f,o.event.keywords),oe(_,"title",$),M(z,`${ee??""} `),M(G,n)},[()=>q(o.event.timestamp),()=>k(o.event.timestamp),()=>q(o.event.timestamp)]),m(y,j)};R(I,y=>{a(s)?y(A):a(r)?y(S,1):y(D,!1)})}m(u,C),J()}F(["click","keydown"]);var Ze=x('<p class="error svelte-1kklj14"> </p>'),Fe=x('<p class="status svelte-1kklj14">Loading...</p>'),Ge=x('<p class="status svelte-1kklj14"> </p>'),Ke=x('<div class="search-view svelte-1kklj14"><div class="search-bar svelte-1kklj14"><svg class="search-icon svelte-1kklj14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <input type="text" class="search-input svelte-1kklj14" placeholder="Search events..."/></div> <!> <div class="results"><!></div></div>');function Qe(u,o){P(o,!0);let r=w(""),e=w(be([])),s=w(!1),v=w(""),l=null;X(()=>{clearTimeout(l);const i=a(r);return l=setTimeout(()=>b(i),300),()=>clearTimeout(l)});async function b(i){t(s,!0),t(v,"");try{t(e,await ge(i),!0)}catch(c){t(v,c.message,!0)}t(s,!1)}async function g(i,c){try{await ye(i,c),t(e,a(e).map(f=>f.id===i?{...f,keywords:c}:f),!0)}catch(f){t(v,f.message,!0)}}async function E(i){try{await me(i),t(e,a(e).filter(c=>c.id!==i),!0)}catch(c){t(v,c.message,!0)}}var h=Ke(),k=d(h),q=p(d(k),2),C=p(k,2);{var I=i=>{var c=Ze(),f=d(c);N(()=>M(f,a(v))),m(i,c)};R(C,i=>{a(v)&&i(I)})}var A=p(C,2),S=d(A);{var D=i=>{var c=Fe();m(i,c)},y=i=>{var c=Ge(),f=d(c);N(()=>M(f,a(r)?"No results found":"No events yet")),m(i,c)},j=i=>{var c=ie(),f=Z(c);ke(f,17,()=>a(e),_=>_.id,(_,z)=>{Xe(_,{get event(){return a(z)},onUpdate:g,onDelete:E})}),m(i,c)};R(S,i=>{a(s)&&a(e).length===0?i(D):a(e).length===0?i(y,1):i(j,!1)})}H(q,()=>a(r),i=>t(r,i)),m(u,h),J()}var $e=x('<nav class="tab-bar svelte-1n51new"><button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1n51new"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg> <span>Record</span></button> <button><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-1n51new"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg> <span>Search</span></button></nav>');function et(u,o){P(o,!0);let r=ze(o,"activeTab",3,"record");var e=$e(),s=d(e);let v;s.__click=()=>o.onTabChange("record");var l=p(s,2);let b;l.__click=()=>o.onTabChange("search"),N(()=>{v=re(s,1,"tab svelte-1n51new",null,v,{active:r()==="record"}),b=re(l,1,"tab svelte-1n51new",null,b,{active:r()==="search"})}),m(u,e),J()}F(["click"]);var tt=x('<div class="loading svelte-1n46o8q"><div class="spinner svelte-1n46o8q"></div></div>'),at=x('<main class="app svelte-1n46o8q"><!> <!></main>');function st(u,o){P(o,!0);let r=w(null),e=w(!0),s=w("record");X(()=>{Y.auth.getSession().then(({data:{session:k}})=>{t(r,k,!0),t(e,!1)});const{data:{subscription:h}}=Y.auth.onAuthStateChange((k,q)=>{t(r,q,!0)});return()=>h.unsubscribe()});var v=ie(),l=Z(v);{var b=h=>{var k=tt();m(h,k)},g=h=>{Ce(h,{})},E=h=>{var k=at(),q=d(k);{var C=S=>{Oe(S,{})},I=S=>{Qe(S,{})};R(q,S=>{a(s)==="record"?S(C):S(I,!1)})}var A=p(q,2);et(A,{get activeTab(){return a(s)},onTabChange:S=>t(s,S,!0)}),m(h,k)};R(l,h=>{a(e)?h(b):a(r)?h(E,!1):h(g,1)})}m(u,v),J()}we(st,{target:document.getElementById("app")});"serviceWorker"in navigator&&navigator.serviceWorker.register("/noted/sw.js");
